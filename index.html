<!DOCTYPE HTML>
<html>
  <head>
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link href="stylesheets/style.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Josefin+Sans:400,300' rel='stylesheet' type='text/css'>
    <script src="scripts/jquery-2.2.0.min.js"> </script>
    <script src="https://cdn.firebase.com/js/client/2.4.1/firebase.js"></script>
    <script src="scripts/jquery.echonest.js" </script>
    <script src="scripts/scripts.js"> </script> 
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.4.js" type="text/javascript"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js" type="text/javascript"></script>
    <script src="scripts/echonest.js"> </script> 
    <script src="scripts/Facebook.js"> </script>
    <script src="scripts/artists.js"> </script>
    <!-- <script src="scripts/spotify.js"> </script> -->





  </head>
  <body>
  <!--   <script type="text/javascript">
        window.fbAsyncInit = function() {
          FB.init({
            appId      : '1856892061204363',
            xfbml      : true,
            version    : 'v2.5'
          });
        };

    </script> -->

    <div id="main_wrapper" class="container">
        <br>
        <table>
        <tr>

            <td style="margin: auto 0px auto; width: 50%"><img src="img/CULogo187.png"/></td>
            <td style="margin: auto 0px auto; width: 50%"><img src="img/jacobs-logo-white.png" /></td>

        </tr>
        </table>
        <header>
            <h1>Social Network Informor</h1>
            <p> We provide insights into your online social Presence</p>
        </header>
        <a target="_blank" href= "welcome.html">Home Page</a>
        <section id="my_marks">

           <!--  <div
              class="fb-like"
              data-share="true"
              data-width="450"
              data-show-faces="true">
            </div> -->

            <div 
                class="fb-login-button" 
                scope="public_profile,email,user_friends,user_actions.music,user_photos,user_posts,user_likes" 
                data-max-rows="1" 
                data-size="xlarge" 
                data-show-faces="false" 
                data-auto-logout-link="true">
            </div>

            <!--fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
            </fb:login-button-->

            <div id="status">
            </div>
            <div id ="hot_artists">
            <h3> Trending Artists Among Your Friends</h3>
            </div>

            <div id ="top_songs">
            <h3> Top Music Among Your Friends</h3>
            </div>

<!-- 
            <div class="spotify">
                <p>Log in with your Spotify account and this demo will display information about you fetched using the Spotify Web API</p>
                <button class="btn btn-primary" id="btn-login">Login</button>
                <div id="result"> > empty < </div>
            </div>
            <script id="result-template" type="text/x-handlebars-template">
                <dl>
                  <img src="{{images.0.url}}">
                  <dt>User Name</dt>
                  <dd>{{id}}</dd>
                  <dt>Display Name</dt>
                  <dd>{{display_name}}</dd>
                  <dt>Country</dt>
                  <dd>{{country}}</dd>
                  <dt>Followers</dt>
                  <dd>{{followers.total}}</dd>
                  <dt>Profile</dt>
                  <dd><a href="{{external_urls.spotify}}" target="_blank">{{external_urls.spotify}}</a></dd>
                  <dt>Email</dt>
                  <dd>{{email}}</dd>
                  <dt>Product</dt>
                  <dd>{{product}}</dd>
                </dl>
            </script>

 -->  
        
        <input  type="button" id="queryFB2" value="queryFB2">
        <input onclick="queryFireBase()" type="button" id="queryFB" value="Return Hot Artists">
        <script>


          function queryFireBase(){
          console.log("queryFireBase called!");
          window.alert("you queried firebase");
          var artistHotnessRef = new Firebase("https://social-informor.firebaseio.com/"+name+"/artistHotness");
          var object = [];
          artistHotnessRef.on("value", function(snapshot) {
            var object = snapshot.val();
            // snapshot.sort(function(b,a) {
            //   return parseFloat(a.hotttnesss) - parseFloat(b.hotttnesss);
            // });
            object.sort(function(b,a) {
              return parseFloat(a.hotttnesss) - parseFloat(b.hotttnesss);
            });            
            // console.log("object after sorting is " + snapshot);
            console.log("object after sorting is " + object);
            console.log(JSON.stringify(object[0]));
            console.log(JSON.stringify(object[1]));
            console.log("object length is " + object.length);

            console.log(snapshot.val());
          }, function (errorObject) {
            console.log("The read failed: " + errorObject.code);
          });
          // for (i = 0; object.length < 10 ; i++) {
          //     console.log (JSON.Stringify(object[i]);
          //     var artistName = object[i].name;
          //     var hotness_score = object[i].hotttnesss;
          //     console.log("artist name is: " + artistName + " hotness score is: " + hotness_score);
          //     $( "#hot_artists" ).append( "<li>" + artistName + ": " + "score: " +hotness_score + "</li>");
          //   }
          // artistHotnessRef.orderByChild("hotttnesss").limitToLast(10).on("value", function(snapshot) {
          //   var object = snapshot.val();
          //   // for (i = 0; object.length < 10 ; i++) { 
          //   //   var artistName = object[i].name;
          //   //   var hotness_score = object[i].hotttnesss;
          //   //   console.log("artist name is: " + artistName + " hotness score is: " + hotness_score);
          //   //   $( "#hot_artists" ).append( "<li>" + artistName + ": " + "score: " +hotness_score + "</li>" );
            // }
          //   console.log("artist is: " + object.0.name);
          //   console.log("snapshot value is: ", JSON.stringify(object));
          // });
        }

        </script>
        
        </section>


    </div>
  </body>
</html>